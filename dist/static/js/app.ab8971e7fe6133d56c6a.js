webpackJsonp([5],{19:function(e,a){},2:function(e,a,t){"use strict";a.a={wxAppId:"wx01fca666dc60594f",getOpenIdUrl:function(e){return"http://wx.xlink.cn/v2/wechat_gateway/2e0fa6b22db1ee00/get_open_id?code="+e},getUserAuthorizeUrl:function(e){return"http://wx.xlink.cn/v2/wechat_gateway/2e0fa6b22db1ee00/wx_access_token?open_id="+e+"&resource=wechat"},getDevicesUrl:function(e){return"http://wx.xlink.cn/v2/wechat_gateway/2e0fa6b22db1ee00/wx_device_list?access_token=XLINKUserAccessToken&open_id="+e},getJsApiSignUrl:function(e,a){return"http://wx.xlink.cn/v2/wechat_gateway/2e0fa6b22db1ee00/url_signature?nonceStr="+e+"&timestamp="+a+"&url="+encodeURIComponent(window.location.href)},getOauthUrl:function(){var e="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx01fca666dc60594f";return e+="&redirect_uri="+encodeURIComponent("http://www.you-best-link.com/WechatDevice/PlantTreasure/index.html")+"&response_type=code&scope=snsapi_base&state=123456#wechat_redirect"}}},3:function(e,a,t){"use strict";var n=t(0),o=t(2);a.a={init:function(){var e=parseInt((new Date).getTime()/1e3)+"",a=e,t=o.a.getJsApiSignUrl(a,e);n.default.http.get(t).then(function(t){window.wx.config({debug:!1,appId:o.a.wxAppId,timestamp:e,nonceStr:a,signature:t.body.signature,jsApiList:["scanQRCode","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard","configWXDeviceWiFi","openWXDeviceLib","getWXDeviceInfos"]})})}}},4:function(e,a,t){"use strict";function n(){var e=window.location.search,a={},t=[];if(-1!==e.indexOf("?")){e=e.substr(1),t=e.split("&");for(var n=0;n<t.length;n++)a[t[n].split("=")[0]]=decodeURIComponent(t[n].split("=")[1])}return a.code}function o(e){var a=g.a.getOpenIdUrl(e);console.log("getOpenId:"+a),h.default.http.get(a).then(function(e){console.log(e.body);var a=e.body;v=a.open_id,w=a.user_id,i(v)}).catch(function(e){console.log("getOpenId err"),window.parent.location=g.a.getOauthUrl()})}function i(e){var a=g.a.getUserAuthorizeUrl(e);console.log("getUserAuthorize:"+a),h.default.http.get(a).then(function(a){console.log("getUserAuthorize:"),console.log(a.body),b=a.body.authorize,w=a.body.user_id,c(e)}).catch(function(e){console.log(e)})}function c(e){var a=g.a.getDevicesUrl(e);h.default.http.get(a).then(function(e){console.log("getDevices:"),console.log(e);var a=[];e.body.devices.forEach(function(e){a.push({device_id:e.device_id,device_pid:e.device_pid,device_type:e.device_type,id:e.device_id,mac:e.device_mac,pid:e.device_pid})}),l(a)}).catch(function(e){console.log(e)})}function r(e){e.online=!1,e.data={power:!1,viewModePower:!1,fanPower:!1,waterAlarn:!1,temperature:0,plantType:1,startTime:0,plantInfo:[{exposureTime:0,plantId:1,growthCycle:0,growthDay:0,autoLightPower:!1,redLight:0,blueLight:0,whiteLight:0},{exposureTime:0,plantId:1,growthCycle:0,growthDay:0,autoLightPower:!1,redLight:0,blueLight:0,whiteLight:0},{exposureTime:0,plantId:1,growthCycle:0,growthDay:0,autoLightPower:!1,redLight:0,blueLight:0,whiteLight:0}]}}function l(e){console.log("initSDK");var a=new p.a("websocket",{host:"http://cm.xlink.cn:23777",userid:w+"",authorize:b,dp_version:2});a.on("ready",function(){console.log("websocket ready"),a.emit("adddevices",e)}).on("devicesready",function(a){if(console.log("devicesready"),a&&!(a.length<=0)){for(var t=0;t<e.length;t++)a[t].id=e[t].device_id,a[t].userid=w,a[t].token=w;a.forEach(function(e){r(e),e.on("statuschange",function(a){console.log("device on statuschange:"+a),e.online=a}).on("data",function(a){console.log("device on data"),d(e,a)}).on("connect",function(e){console.log("connect")}),e.emit("connect"),e.emit("probe",function(a){0===a.status?d(e,a):10===a.status?console.log(a.msg):console.log(a)})}),window.devices=a,window.devicesReady&&window.devicesReady(window.devices),console.log("window.devicesReady")}})}function d(e,a){a.type,e.online=!0;for(var t=0;t<a.data.length;t++){var n=a.data[t];switch(console.log(n.index+","+n.value),n.index){case 0:e.data.power=n.value;break;case 1:e.data.viewModePower=n.value;break;case 2:e.data.fanPower=n.value;break;case 3:e.data.waterAlarn=n.value;break;case 4:e.data.temperature=n.value-40;break;case 5:e.data.startTime=n.value;break;case 6:e.data.plantInfo[0].exposureTime=n.value;break;case 7:e.data.plantInfo[0].plantId=n.value;break;case 8:e.data.plantInfo[0].growthCycle=n.value;break;case 9:e.data.plantInfo[0].growthDay=n.value;break;case 10:e.data.plantInfo[0].autoLightPower=n.value;break;case 11:e.data.plantInfo[0].redLight=n.value;break;case 12:e.data.plantInfo[0].blueLight=n.value;break;case 13:e.data.plantInfo[0].whiteLight=n.value;break;case 14:e.data.plantInfo[1].exposureTime=n.value;break;case 15:e.data.plantInfo[1].plantId=n.value;break;case 16:e.data.plantInfo[1].growthCycle=n.value;break;case 17:e.data.plantInfo[1].growthDay=n.value;break;case 18:e.data.plantInfo[1].autoLightPower=n.value;break;case 19:e.data.plantInfo[1].redLight=n.value;break;case 20:e.data.plantInfo[1].blueLight=n.value;break;case 21:e.data.plantInfo[1].whiteLight=n.value;break;case 22:e.data.plantInfo[2].exposureTime=n.value;break;case 23:e.data.plantInfo[2].plantId=n.value;break;case 24:e.data.plantInfo[2].growthCycle=n.value;break;case 25:e.data.plantInfo[2].growthDay=n.value;break;case 26:e.data.plantInfo[2].autoLightPower=n.value;break;case 27:e.data.plantInfo[2].redLight=n.value;break;case 28:e.data.plantInfo[2].blueLight=n.value;break;case 29:e.data.plantInfo[2].whiteLight=n.value;break;case 30:e.data.plantType=n.value}}}function u(){if(console.log("xLinkSDK init"),f)return void i(v);o(n())}var s=t(18),p=t.n(s),h=t(0),g=t(2),f=!0,v="oVTvT0shR6UT_jdihydtBdJg45rc",w="",b="";a.a=u},5:function(e,a){},9:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t(0),o=t(7),i=t(6),c=t(3),r=t(4),l=t(5),d=(t.n(l),t(1)),u=t.n(d);n.default.config.productionTip=!1,n.default.use(o.a),n.default.use(i.a),n.default.use(u.a),c.a.init(),t.i(r.a)();var s=new o.a({routes:[{path:"/",redirect:"/index"},{path:"/index",component:function(e){return t.e(2).then(function(){var a=[t(13)];e.apply(null,a)}.bind(this)).catch(t.oe)}},{path:"/control/",component:function(e){return t.e(3).then(function(){var a=[t(12)];e.apply(null,a)}.bind(this)).catch(t.oe)},children:[{path:"vegetablesclass/:deviceId",component:function(e){return t.e(1).then(function(){var a=[t(15)];e.apply(null,a)}.bind(this)).catch(t.oe)}},{path:"plantingbox/:deviceId",component:function(e){return t.e(0).then(function(){var a=[t(14)];e.apply(null,a)}.bind(this)).catch(t.oe)}}]}]});s.afterEach(function(e){d.Indicator.close()}),window.router=s,new n.default({el:"#app",router:s})}},[9]);
//# sourceMappingURL=app.ab8971e7fe6133d56c6a.js.map