{"version":3,"sources":["webpack:///static/js/app.ab8971e7fe6133d56c6a.js","webpack:///./src/app-config.js","webpack:///./src/Weixin.js","webpack:///./src/xLinkSDK.js","webpack:///./src/main.js"],"names":["webpackJsonp","19","module","exports","2","__webpack_exports__","__webpack_require__","wxAppId","getOpenIdUrl","code","XLINK_SERVER","getUserAuthorizeUrl","openid","getDevicesUrl","getJsApiSignUrl","nonceStr","timeStamp","encodeURIComponent","window","location","href","getOauthUrl","url","3","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__app_config__","init","parseInt","Date","getTime","http","get","then","res","wx","config","debug","appId","timestamp","signature","body","jsApiList","4","getSearchCode","search","searchs","strs","indexOf","substr","split","i","length","decodeURIComponent","getOpenId","__WEBPACK_IMPORTED_MODULE_2__app_config__","console","log","__WEBPACK_IMPORTED_MODULE_1_vue__","user","open_id","userid","user_id","getUserAuthorize","catch","err","parent","authorize","getDevices","devices","forEach","item","push","device_id","device_pid","device_type","id","mac","device_mac","pid","initSDK","addDeviceInfo","device","online","data","power","viewModePower","fanPower","waterAlarn","temperature","plantType","startTime","plantInfo","exposureTime","plantId","growthCycle","growthDay","autoLightPower","redLight","blueLight","whiteLight","ws","__WEBPACK_IMPORTED_MODULE_0_xlink_jssdk___default","a","host","dp_version","on","emit","xDevices","token","updateDeviceDataPoint","status","msg","devicesReady","type","datapoint","index","value","isDebug","__WEBPACK_IMPORTED_MODULE_0_xlink_jssdk__","n","5","9","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2_vue_resource__","__WEBPACK_IMPORTED_MODULE_3__Weixin__","__WEBPACK_IMPORTED_MODULE_4__xLinkSDK__","__WEBPACK_IMPORTED_MODULE_5_mint_ui_lib_style_css__","__WEBPACK_IMPORTED_MODULE_6_mint_ui__","__WEBPACK_IMPORTED_MODULE_6_mint_ui___default","productionTip","use","router","routes","path","redirect","component","resolve","e","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","this","oe","children","afterEach","route","close","el"],"mappings":"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","file":"static/js/app.ab8971e7fe6133d56c6a.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 19:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar XLINK_APP_ID = \"2e0fa6b22db1ee00\";\nvar XLINK_SERVER = \"http://wx.xlink.cn\";\n\nvar WECHAT_APP_ID = \"wx01fca666dc60594f\";\n\nvar APP_URL = \"http://www.you-best-link.com/WechatDevice/PlantTreasure/index.html\";\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n\n  wxAppId: WECHAT_APP_ID,\n\n  getOpenIdUrl: function getOpenIdUrl(code) {\n    return XLINK_SERVER + '/v2/wechat_gateway/' + XLINK_APP_ID + '/get_open_id?code=' + code;\n  },\n\n  getUserAuthorizeUrl: function getUserAuthorizeUrl(openid) {\n    return XLINK_SERVER + '/v2/wechat_gateway/' + XLINK_APP_ID + '/wx_access_token?open_id=' + openid + '&resource=wechat';\n  },\n\n  getDevicesUrl: function getDevicesUrl(openid) {\n    return XLINK_SERVER + '/v2/wechat_gateway/' + XLINK_APP_ID + '/wx_device_list?access_token=XLINKUserAccessToken&open_id=' + openid;\n  },\n\n  getJsApiSignUrl: function getJsApiSignUrl(nonceStr, timeStamp) {\n\n    return XLINK_SERVER + '/v2/wechat_gateway/' + XLINK_APP_ID + '/url_signature?nonceStr=' + nonceStr + '&timestamp=' + timeStamp + '&url=' + encodeURIComponent(window.location.href);\n  },\n\n  getOauthUrl: function getOauthUrl() {\n    var url = \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=\" + WECHAT_APP_ID;\n    url += \"&redirect_uri=\" + encodeURIComponent(APP_URL) + \"&response_type=code&scope=snsapi_base&state=123456#wechat_redirect\";\n    return url;\n  }\n\n});\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_config__ = __webpack_require__(2);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n\n    init: function init() {\n\n        var timeStamp = parseInt(new Date().getTime() / 1000) + \"\";\n        var nonceStr = timeStamp;\n\n        var url = __WEBPACK_IMPORTED_MODULE_1__app_config__[\"a\" /* default */].getJsApiSignUrl(nonceStr, timeStamp);\n\n        __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].http.get(url).then(function (res) {\n\n            window.wx.config({\n                debug: false,\n                appId: __WEBPACK_IMPORTED_MODULE_1__app_config__[\"a\" /* default */].wxAppId,\n                timestamp: timeStamp,\n                nonceStr: nonceStr,\n                signature: res.body.signature,\n                jsApiList: [\"scanQRCode\", \"onMenuShareTimeline\", \"onMenuShareAppMessage\", \"onMenuShareQQ\", \"onMenuShareWeibo\", \"onMenuShareQZone\", \"startRecord\", \"stopRecord\", \"onVoiceRecordEnd\", \"playVoice\", \"pauseVoice\", \"stopVoice\", \"onVoicePlayEnd\", \"uploadVoice\", \"downloadVoice\", \"chooseImage\", \"previewImage\", \"uploadImage\", \"downloadImage\", \"translateVoice\", \"getNetworkType\", \"openLocation\", \"getLocation\", \"hideOptionMenu\", \"showOptionMenu\", \"hideMenuItems\", \"showMenuItems\", \"hideAllNonBaseMenuItem\", \"showAllNonBaseMenuItem\", \"closeWindow\", \"scanQRCode\", \"chooseWXPay\", \"openProductSpecificView\", \"addCard\", \"chooseCard\", \"openCard\", \"configWXDeviceWiFi\", \"openWXDeviceLib\", \"getWXDeviceInfos\"] });\n        });\n    }\n\n});\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_xlink_jssdk__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_xlink_jssdk___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_xlink_jssdk__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_config__ = __webpack_require__(2);\n\n\n\n\nvar isDebug = true;\nvar openid = \"oVTvT0shR6UT_jdihydtBdJg45rc\";\nvar userid = \"\";\nvar authorize = \"\";\n\nfunction getSearchCode() {\n  var search = window.location.search;\n  var searchs = {};\n  var strs = [];\n  if (search.indexOf('?') !== -1) {\n    search = search.substr(1);\n    strs = search.split('&');\n    for (var i = 0; i < strs.length; i++) {\n      searchs[strs[i].split('=')[0]] = decodeURIComponent(strs[i].split('=')[1]);\n    }\n  }\n\n  return searchs['code'];\n}\n\nfunction getOpenId(code) {\n\n  var url = __WEBPACK_IMPORTED_MODULE_2__app_config__[\"a\" /* default */].getOpenIdUrl(code);\n\n  console.log(\"getOpenId:\" + url);\n\n  __WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].http.get(url).then(function (res) {\n    console.log(res.body);\n    var user = res.body;\n    openid = user.open_id;\n    userid = user.user_id;\n    getUserAuthorize(openid);\n  }).catch(function (err) {\n    console.log(\"getOpenId err\");\n\n    window.parent.location = __WEBPACK_IMPORTED_MODULE_2__app_config__[\"a\" /* default */].getOauthUrl();\n  });\n}\n\nfunction getUserAuthorize(openid) {\n\n  var url = __WEBPACK_IMPORTED_MODULE_2__app_config__[\"a\" /* default */].getUserAuthorizeUrl(openid);\n\n  console.log(\"getUserAuthorize:\" + url);\n\n  __WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].http.get(url).then(function (res) {\n    console.log(\"getUserAuthorize:\");\n    console.log(res.body);\n    authorize = res.body.authorize;\n    userid = res.body.user_id;\n    getDevices(openid);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n\nfunction getDevices(openid) {\n\n  var url = __WEBPACK_IMPORTED_MODULE_2__app_config__[\"a\" /* default */].getDevicesUrl(openid);\n\n  __WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].http.get(url).then(function (res) {\n    console.log(\"getDevices:\");\n    console.log(res);\n    var devices = [];\n    res.body.devices.forEach(function (item) {\n\n      devices.push({\n        device_id: item.device_id,\n        device_pid: item.device_pid,\n        device_type: item.device_type,\n\n        id: item.device_id,\n        mac: item.device_mac,\n        pid: item.device_pid\n      });\n    });\n    initSDK(devices);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n\nfunction addDeviceInfo(device) {\n\n  device.online = false;\n  device.data = {\n\n    power: false,\n    viewModePower: false,\n    fanPower: false,\n    waterAlarn: false,\n    temperature: 0,\n    plantType: 1,\n    startTime: 0,\n    plantInfo: [{\n      exposureTime: 0,\n      plantId: 1,\n      growthCycle: 0,\n      growthDay: 0,\n      autoLightPower: false,\n      redLight: 0,\n      blueLight: 0,\n      whiteLight: 0 }, {\n      exposureTime: 0,\n      plantId: 1,\n      growthCycle: 0,\n      growthDay: 0,\n      autoLightPower: false,\n      redLight: 0,\n      blueLight: 0,\n      whiteLight: 0 }, {\n      exposureTime: 0,\n      plantId: 1,\n      growthCycle: 0,\n      growthDay: 0,\n      autoLightPower: false,\n      redLight: 0,\n      blueLight: 0,\n      whiteLight: 0 }]\n\n  };\n}\n\nfunction initSDK(devices) {\n  console.log('initSDK');\n\n  var ws = new __WEBPACK_IMPORTED_MODULE_0_xlink_jssdk___default.a('websocket', {\n\n    host: 'http://cm.xlink.cn:23777',\n    userid: userid + \"\",\n    authorize: authorize,\n    dp_version: 2\n  });\n\n  ws.on('ready', function () {\n\n    console.log('websocket ready');\n    ws.emit('adddevices', devices);\n  }).on('devicesready', function (xDevices) {\n    console.log('devicesready');\n    if (!xDevices || xDevices.length <= 0) {\n      return;\n    }\n\n    for (var i = 0; i < devices.length; i++) {\n      xDevices[i].id = devices[i].device_id;\n      xDevices[i].userid = userid;\n      xDevices[i].token = userid;\n    }\n\n    xDevices.forEach(function (device) {\n\n      addDeviceInfo(device);\n\n      device.on('statuschange', function (data) {\n        console.log('device on statuschange:' + data);\n        device.online = data;\n      }).on('data', function (data) {\n        console.log('device on data');\n        updateDeviceDataPoint(device, data);\n      }).on(\"connect\", function (data) {\n        console.log(\"connect\");\n      });\n\n      device.emit(\"connect\");\n      device.emit(\"probe\", function (res) {\n        if (res.status === 0) {\n          updateDeviceDataPoint(device, res);\n        } else if (res.status === 10) {\n          console.log(res.msg);\n        } else {\n          console.log(res);\n        }\n      });\n    });\n\n    window.devices = xDevices;\n    if (window.devicesReady) {\n      window.devicesReady(window.devices);\n    }\n    console.log('window.devicesReady');\n  });\n}\n\nfunction updateDeviceDataPoint(device, data) {\n\n  if (data.type != \"datapoint\") {}\n\n  device.online = true;\n\n  for (var i = 0; i < data.data.length; i++) {\n    var datapoint = data.data[i];\n    console.log(datapoint.index + \",\" + datapoint.value);\n    switch (datapoint.index) {\n      case 0:\n        device.data.power = datapoint.value;\n        break;\n      case 1:\n        device.data.viewModePower = datapoint.value;\n        break;\n      case 2:\n        device.data.fanPower = datapoint.value;\n        break;\n      case 3:\n        device.data.waterAlarn = datapoint.value;\n        break;\n      case 4:\n        device.data.temperature = datapoint.value - 40;\n        break;\n      case 5:\n        device.data.startTime = datapoint.value;\n        break;\n\n      case 6:\n        device.data.plantInfo[0].exposureTime = datapoint.value;\n        break;\n      case 7:\n        device.data.plantInfo[0].plantId = datapoint.value;\n        break;\n      case 8:\n        device.data.plantInfo[0].growthCycle = datapoint.value;\n        break;\n      case 9:\n        device.data.plantInfo[0].growthDay = datapoint.value;\n        break;\n      case 10:\n        device.data.plantInfo[0].autoLightPower = datapoint.value;\n        break;\n      case 11:\n        device.data.plantInfo[0].redLight = datapoint.value;\n        break;\n      case 12:\n        device.data.plantInfo[0].blueLight = datapoint.value;\n        break;\n      case 13:\n        device.data.plantInfo[0].whiteLight = datapoint.value;\n        break;\n\n      case 14:\n        device.data.plantInfo[1].exposureTime = datapoint.value;\n        break;\n      case 15:\n        device.data.plantInfo[1].plantId = datapoint.value;\n        break;\n      case 16:\n        device.data.plantInfo[1].growthCycle = datapoint.value;\n        break;\n      case 17:\n        device.data.plantInfo[1].growthDay = datapoint.value;\n        break;\n      case 18:\n        device.data.plantInfo[1].autoLightPower = datapoint.value;\n        break;\n      case 19:\n        device.data.plantInfo[1].redLight = datapoint.value;\n        break;\n      case 20:\n        device.data.plantInfo[1].blueLight = datapoint.value;\n        break;\n      case 21:\n        device.data.plantInfo[1].whiteLight = datapoint.value;\n        break;\n\n      case 22:\n        device.data.plantInfo[2].exposureTime = datapoint.value;\n        break;\n      case 23:\n        device.data.plantInfo[2].plantId = datapoint.value;\n        break;\n      case 24:\n        device.data.plantInfo[2].growthCycle = datapoint.value;\n        break;\n      case 25:\n        device.data.plantInfo[2].growthDay = datapoint.value;\n        break;\n      case 26:\n        device.data.plantInfo[2].autoLightPower = datapoint.value;\n        break;\n      case 27:\n        device.data.plantInfo[2].redLight = datapoint.value;\n        break;\n      case 28:\n        device.data.plantInfo[2].blueLight = datapoint.value;\n        break;\n      case 29:\n        device.data.plantInfo[2].whiteLight = datapoint.value;\n        break;\n\n      case 30:\n        device.data.plantType = datapoint.value;\n        break;\n\n    }\n  }\n}\n\nfunction init() {\n  console.log('xLinkSDK init');\n\n  if (isDebug) {\n    getUserAuthorize(openid);\n    return;\n  }\n  var code = getSearchCode();\n  getOpenId(code);\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (init);\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 9:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_resource__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Weixin__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__xLinkSDK__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_mint_ui_lib_style_css__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_mint_ui_lib_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_mint_ui_lib_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_mint_ui__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_mint_ui__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].config.productionTip = false;\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_2_vue_resource__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_6_mint_ui___default.a);\n\n\n__WEBPACK_IMPORTED_MODULE_3__Weixin__[\"a\" /* default */].init();\n__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__xLinkSDK__[\"a\" /* default */])();\n\nvar router = new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{ path: '/', redirect: '/index' }, { path: '/index', component: function component(resolve) {\n      return __webpack_require__.e/* require */(2).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(13)]; (resolve.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this)).catch(__webpack_require__.oe);\n    } }, {\n    path: '/control/', component: function component(resolve) {\n      return __webpack_require__.e/* require */(3).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(12)]; (resolve.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this)).catch(__webpack_require__.oe);\n    },\n    children: [{ path: 'vegetablesclass/:deviceId', component: function component(resolve) {\n        return __webpack_require__.e/* require */(1).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(15)]; (resolve.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this)).catch(__webpack_require__.oe);\n      } }, { path: 'plantingbox/:deviceId', component: function component(resolve) {\n        return __webpack_require__.e/* require */(0).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(14)]; (resolve.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this)).catch(__webpack_require__.oe);\n      } }]\n  }]\n});\n\nrouter.afterEach(function (route) {\n  __WEBPACK_IMPORTED_MODULE_6_mint_ui__[\"Indicator\"].close();\n});\n\nwindow.router = router;\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]({\n  el: '#app',\n  router: router\n\n});\n\n/***/ })\n\n},[9]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.ab8971e7fe6133d56c6a.js","var XLINK_APP_ID = \"2e0fa6b22db1ee00\"\r\nvar XLINK_SERVER = \"http://wx.xlink.cn\"\r\n\r\nvar WECHAT_APP_ID = \"wx01fca666dc60594f\"\r\n\r\nvar APP_URL = \"http://www.you-best-link.com/WechatDevice/PlantTreasure/index.html\"\r\n\r\nexport default {\r\n\r\n  wxAppId: WECHAT_APP_ID,\r\n\r\n  getOpenIdUrl: function (code) {\r\n    return XLINK_SERVER + '/v2/wechat_gateway/' + XLINK_APP_ID + '/get_open_id?code=' + code\r\n  },\r\n\r\n  getUserAuthorizeUrl: function (openid) {\r\n    return XLINK_SERVER + '/v2/wechat_gateway/' + XLINK_APP_ID + '/wx_access_token?open_id=' + openid + '&resource=wechat'\r\n  },\r\n\r\n  getDevicesUrl: function (openid) {\r\n    return XLINK_SERVER + '/v2/wechat_gateway/' + XLINK_APP_ID + '/wx_device_list?access_token=XLINKUserAccessToken&open_id=' + openid;\r\n  },\r\n\r\n  getJsApiSignUrl: function (nonceStr, timeStamp) {\r\n\r\n    return XLINK_SERVER + '/v2/wechat_gateway/' + XLINK_APP_ID + '/url_signature?nonceStr=' + nonceStr + '&timestamp=' + timeStamp + '&url=' + encodeURIComponent(window.location.href)\r\n  },\r\n\r\n  getOauthUrl: function () {\r\n    var url = \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=\" + WECHAT_APP_ID;\r\n    url += \"&redirect_uri=\" + encodeURIComponent(APP_URL) + \"&response_type=code&scope=snsapi_base&state=123456#wechat_redirect\";\r\n    return url;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app-config.js","import Vue from 'vue'\r\nimport config from './app-config'\r\n\r\n\r\nexport default {\r\n\r\n  init: function () {\r\n\r\n\r\n    var timeStamp = parseInt(new Date().getTime() / 1000) + \"\"\r\n    var nonceStr = timeStamp\r\n\r\n    var url = config.getJsApiSignUrl(nonceStr, timeStamp)\r\n\r\n    Vue.http.get(url).then(function (res) {\r\n\r\n\r\n      window.wx.config({\r\n        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n        appId: config.wxAppId, // 必填，公众号的唯一标识\r\n        timestamp: timeStamp, // 必填，生成签名的时间戳\r\n        nonceStr: nonceStr, // 必填，生成签名的随机串\r\n        signature: res.body.signature,// 必填，签名，见附录1\r\n        jsApiList: [\r\n          \"scanQRCode\",\r\n\r\n          \"onMenuShareTimeline\",\r\n\r\n\r\n          \"onMenuShareAppMessage\",\r\n          \"onMenuShareQQ\",\r\n          \"onMenuShareWeibo\",\r\n          \"onMenuShareQZone\",\r\n          \"startRecord\",\r\n          \"stopRecord\",\r\n          \"onVoiceRecordEnd\",\r\n          \"playVoice\",\r\n          \"pauseVoice\",\r\n          \"stopVoice\",\r\n          \"onVoicePlayEnd\",\r\n          \"uploadVoice\",\r\n          \"downloadVoice\",\r\n          \"chooseImage\",\r\n          \"previewImage\",\r\n          \"uploadImage\",\r\n          \"downloadImage\",\r\n          \"translateVoice\",\r\n          \"getNetworkType\",\r\n          \"openLocation\",\r\n          \"getLocation\",\r\n          \"hideOptionMenu\",\r\n          \"showOptionMenu\",\r\n          \"hideMenuItems\",\r\n          \"showMenuItems\",\r\n          \"hideAllNonBaseMenuItem\",\r\n          \"showAllNonBaseMenuItem\",\r\n          \"closeWindow\",\r\n          \"scanQRCode\",\r\n          \"chooseWXPay\",\r\n          \"openProductSpecificView\",\r\n          \"addCard\",\r\n          \"chooseCard\",\r\n          \"openCard\",\r\n\r\n          // 硬件API\r\n          \"configWXDeviceWiFi\",\r\n          \"openWXDeviceLib\",\r\n          \"getWXDeviceInfos\"\r\n\r\n\r\n        ] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\r\n      });\r\n\r\n    })\r\n\r\n\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Weixin.js","import XSDK from 'xlink-jssdk'\nimport Vue from 'vue'\nimport config from \"./app-config\"\n\nvar isDebug = true;\nvar openid = \"oVTvT0shR6UT_jdihydtBdJg45rc\";\nvar userid = \"\";\nvar authorize = \"\";\n\nfunction getSearchCode() { // 获取url上的code参数\n  var search = window.location.search\n  var searchs = {}\n  var strs = []\n  if (search.indexOf('?') !== -1) {\n    search = search.substr(1)\n    strs = search.split('&')\n    for (var i = 0; i < strs.length; i++) {\n      searchs[strs[i].split('=')[0]] = decodeURIComponent(strs[i].split('=')[1])\n    }\n  }\n\n  return searchs['code']\n}\n\nfunction getOpenId(code) {\n\n  var url = config.getOpenIdUrl(code)\n\n  console.log(\"getOpenId:\" + url);\n\n  Vue.http.get(url).then(function (res) {\n    console.log(res.body);\n    var user = res.body;\n    openid = user.open_id;\n    userid = user.user_id;\n    getUserAuthorize(openid);\n  }).catch(function (err) {\n    console.log(\"getOpenId err\");\n\n    window.parent.location = config.getOauthUrl()\n\n  })\n\n}\n\nfunction getUserAuthorize(openid) {\n\n  var url = config.getUserAuthorizeUrl(openid)\n\n  console.log(\"getUserAuthorize:\" + url)\n\n  Vue.http.get(url).then(function (res) {\n    console.log(\"getUserAuthorize:\")\n    console.log(res.body);\n    authorize = res.body.authorize;\n    userid = res.body.user_id;\n    getDevices(openid);\n  }).catch(function (err) {\n    console.log(err);\n  })\n}\n\n\nfunction getDevices(openid) {\n\n  var url = config.getDevicesUrl(openid)\n\n  Vue.http.get(url).then(function (res) {\n    console.log(\"getDevices:\")\n    console.log(res)\n    var devices = [];\n    res.body.devices.forEach(function (item) {\n\n      devices.push({\n        device_id: item.device_id,\n        device_pid: item.device_pid,\n        device_type: item.device_type,\n\n        id: item.device_id,\n        mac: item.device_mac,\n        pid: item.device_pid,\n      });\n    });\n    initSDK(devices);\n  }).catch(function (err) {\n    console.log(err)\n  })\n}\n\nfunction addDeviceInfo(device) {\n\n\n  device.online = false;\n  device.data = {\n\n    power: false,//表示设备开关机，可APP设置可设备上报，0x00：关机，0x01：开机\n    viewModePower: false,//表示设备观赏模式开关，可APP设置可设备上报，0x00：观赏模式关，0x01：观赏模式开\n    fanPower: false,//表示设备风扇开关，可APP设置可设备上报，0x00：风扇关，0x01：风扇开\n    waterAlarn: false,//表示设备水位警报有无，只可设备上报，0x00：无警报，0x01：有警报\n    temperature: 0,//表示设备环境温度的状态，0x00 ~0x8c：对应0到140；，温度公式为X – 40\n    plantType: 1, //表示设备种植植物种类，可APP设置可设备上报，0x01：叶菜类，0x02：香料类，0x03：果菜类，0x04：花卉类，0x05：食用菌\n    startTime: 0, //表示设置光照开始时间，可APP设置可设备上报，，采用高字节在前，低字节在后的原则。，如设置5小时=300分钟=0x012C，则字节10为0x01，字节11为0x2C。\n    plantInfo: [\n      {\n        exposureTime: 0,//表示设备一层的光照时间，可APP设置可设备上报，0-0x18：对应0到24小时\n        plantId: 1,//表示设备种植植物的ID，可APP设置可设备上报，0x01：芥菜，0x02：菜心，0x03：芥香甜白菜，0x04：意大利生菜，0x05：九芽生菜，0x06：黄叶白菜，0x07：罗马生菜，0x08：紫冠油菜，0x09：芥兰，0x0a：红叶生菜\n        growthCycle: 0,//表示一层所种植物的生长周期，可APP设置可设备上报，0-0xff：对应0到255天\n        growthDay: 0,//表示一层所种植物的已经生长的时间，可APP设置可设备上报，0-0xff：对应0到255天\n        autoLightPower: false,//表示设备一层光照自动调节开关，可APP设置可设备上报，0x00：光照自动调节关，0x01：光照自动调节开\n        redLight: 0,//表示设备一层红光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n        blueLight: 0,//表示设备一层绿光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n        whiteLight: 0,//表示设备一层蓝光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n      },\n      {\n        exposureTime: 0,//表示设备二层的光照时间，可APP设置可设备上报，0-0x18：对应0到24小时\n        plantId: 1,//表示设备种植植物的ID，可APP设置可设备上报，0x01：芥菜，0x02：菜心，0x03：芥香甜白菜，0x04：意大利生菜，0x05：九芽生菜，0x06：黄叶白菜，0x07：罗马生菜，0x08：紫冠油菜，0x09：芥兰，0x0a：红叶生菜\n        growthCycle: 0,//表示二层所种植物的生长周期，可APP设置可设备上报，0-0xff：对应0到255天\n        growthDay: 0,//表示二层所种植物的已经生长的时间，可APP设置可设备上报，0-0xff：对应0到255天\n        autoLightPower: false,//表示设备二层光照自动调节开关，可APP设置可设备上报，0x00：光照自动调节关，0x01：光照自动调节开\n        redLight: 0,//表示设备二层红光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n        blueLight: 0,//表示设备二层绿光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n        whiteLight: 0,//表示设备二层蓝光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n      },\n      {\n        exposureTime: 0,//表示设备三层的光照时间，可APP设置可设备上报，0-0x18：对应0到24小时\n        plantId: 1,//表示设备种植植物的ID，可APP设置可设备上报，0x01：芥菜，0x02：菜心，0x03：芥香甜白菜，0x04：意大利生菜，0x05：九芽生菜，0x06：黄叶白菜，0x07：罗马生菜，0x08：紫冠油菜，0x09：芥兰，0x0a：红叶生菜\n        growthCycle: 0,//表示三层所种植物的生长周期，可APP设置可设备上报，0-0xff：对应0到255天\n        growthDay: 0,//表示三层所种植物的已经生长的时间，可APP设置可设备上报，0-0xff：对应0到255天\n        autoLightPower: false,//表示设备三层光照自动调节开关，可APP设置可设备上报，0x00：光照自动调节关，0x01：光照自动调节开\n        redLight: 0,//表示设备三层红光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n        blueLight: 0,//表示设备三层绿光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n        whiteLight: 0,//表示设备三层蓝光的光照度，可APP设置可设备上报，0x00-0x64：0%到100%\n      }\n    ],\n\n  };\n}\n\nfunction initSDK(devices) {\n  console.log('initSDK');\n\n\n  var ws = new XSDK('websocket', { // xsdk微信应用接口的是基于socket.io实现的。\n\n    host: 'http://cm.xlink.cn:23777',\n    userid: userid + \"\",\n    authorize: authorize,\n    dp_version: 2,\n  });\n\n  ws.on('ready', function () {\n\n    console.log('websocket ready');\n    ws.emit('adddevices', devices);\n\n  }).on('devicesready', function (xDevices) {\n    console.log('devicesready');\n    if (!xDevices || xDevices.length <= 0) {\n      return;\n    }\n\n    for (var i = 0; i < devices.length; i++) {\n      xDevices[i].id = devices[i].device_id;\n      xDevices[i].userid = userid;\n      xDevices[i].token = userid;\n    }\n\n    xDevices.forEach(function (device) {\n\n      addDeviceInfo(device);\n\n      device.on('statuschange', function (data) { // 0表示离线 1表示在线\n        console.log('device on statuschange:' + data)\n        device.online = data;\n      }).on('data', function (data) {\n        console.log('device on data')\n        updateDeviceDataPoint(device, data)\n\n      }).on(\"connect\", function (data) {\n        console.log(\"connect\");\n        //device.online=true;\n      });\n\n      device.emit(\"connect\")\n      device.emit(\"probe\", function (res) {\n        if (res.status === 0) { // 获取成功\n          updateDeviceDataPoint(device, res)\n        } else if (res.status === 10) {\n          console.log(res.msg) // 设备离线\n        } else {\n          console.log(res)\n        }\n      });\n\n    })\n\n    window.devices = xDevices;\n    if (window.devicesReady) {\n      window.devicesReady(window.devices);\n    }\n    console.log('window.devicesReady');\n  })\n}\n\nfunction updateDeviceDataPoint(device, data) {\n\n  if (data.type != \"datapoint\") {\n    //return;\n  }\n\n  device.online=true;\n\n  for (var i = 0; i < data.data.length; i++) {\n    var datapoint = data.data[i];\n    console.log(datapoint.index+\",\"+datapoint.value);\n    switch (datapoint.index) {\n      case 0:\n        device.data.power = datapoint.value;\n        break;\n      case 1:\n        device.data.viewModePower = datapoint.value;\n        break;\n      case 2:\n        device.data.fanPower = datapoint.value;\n        break;\n      case 3:\n        device.data.waterAlarn = datapoint.value;\n        break;\n      case 4:\n        device.data.temperature = datapoint.value - 40;\n        break;\n      case 5:\n        device.data.startTime = datapoint.value;\n        break;\n\n      case 6:\n        device.data.plantInfo[0].exposureTime = datapoint.value;\n        break;\n      case 7:\n        device.data.plantInfo[0].plantId = datapoint.value;\n        break;\n      case 8:\n        device.data.plantInfo[0].growthCycle = datapoint.value;\n        break;\n      case 9:\n        device.data.plantInfo[0].growthDay = datapoint.value;\n        break;\n      case 10:\n        device.data.plantInfo[0].autoLightPower = datapoint.value;\n        break;\n      case 11:\n        device.data.plantInfo[0].redLight = datapoint.value;\n        break;\n      case 12:\n        device.data.plantInfo[0].blueLight = datapoint.value;\n        break;\n      case 13:\n        device.data.plantInfo[0].whiteLight = datapoint.value;\n        break;\n\n      case 14:\n        device.data.plantInfo[1].exposureTime = datapoint.value;\n        break;\n      case 15:\n        device.data.plantInfo[1].plantId = datapoint.value;\n        break;\n      case 16:\n        device.data.plantInfo[1].growthCycle = datapoint.value;\n        break;\n      case 17:\n        device.data.plantInfo[1].growthDay = datapoint.value;\n        break;\n      case 18:\n        device.data.plantInfo[1].autoLightPower = datapoint.value;\n        break;\n      case 19:\n        device.data.plantInfo[1].redLight = datapoint.value;\n        break;\n      case 20:\n        device.data.plantInfo[1].blueLight = datapoint.value;\n        break;\n      case 21:\n        device.data.plantInfo[1].whiteLight = datapoint.value;\n        break;\n\n\n      case 22:\n        device.data.plantInfo[2].exposureTime = datapoint.value;\n        break;\n      case 23:\n        device.data.plantInfo[2].plantId = datapoint.value;\n        break;\n      case 24:\n        device.data.plantInfo[2].growthCycle = datapoint.value;\n        break;\n      case 25:\n        device.data.plantInfo[2].growthDay = datapoint.value;\n        break;\n      case 26:\n        device.data.plantInfo[2].autoLightPower = datapoint.value;\n        break;\n      case 27:\n        device.data.plantInfo[2].redLight = datapoint.value;\n        break;\n      case 28:\n        device.data.plantInfo[2].blueLight = datapoint.value;\n        break;\n      case 29:\n        device.data.plantInfo[2].whiteLight = datapoint.value;\n        break;\n\n      case 30:\n        device.data.plantType = datapoint.value;\n        break;\n\n\n    }\n  }\n}\n\nfunction init() {\n  console.log('xLinkSDK init');\n\n  if (isDebug) {\n    getUserAuthorize(openid);\n    return;\n  }\n  var code = getSearchCode();\n  getOpenId(code);\n}\n\nexport default init\n\n\n\n// WEBPACK FOOTER //\n// ./src/xLinkSDK.js","import Vue from 'vue'\n// import App from './App'\n// import Index from './Index'\nimport VueRouter from 'vue-router'\nimport VueResource from 'vue-resource'\n// import vegetablesclass from './components/vegetablesclass'\n// import plantingbox from './components/plantingbox'\n\nimport Weixin from './Weixin'\nimport XSDK from './xLinkSDK'\n\nimport 'mint-ui/lib/style.css'\nimport MintUI from 'mint-ui'\nimport {Indicator, Toast} from 'mint-ui'\n\nVue.config.productionTip = false\n\nVue.use(VueRouter)\nVue.use(VueResource)\nVue.use(MintUI)\n/* eslint-disable no-new */\n\n\nWeixin.init()\nXSDK()\n\nlet router = new VueRouter({\n  //mode: 'history',\n  routes: [\n    {path: '/', redirect: '/index'},\n    {path: '/index', component: resolve => require(['./Index'], resolve)},\n    {\n      path: '/control/', component: resolve => require(['./App'], resolve),\n      children: [\n        {path: 'vegetablesclass/:deviceId', component: resolve => require(['./components/vegetablesclass'], resolve)},\n        {path: 'plantingbox/:deviceId', component: resolve => require(['./components/plantingbox'], resolve)}\n      ]\n    }\n  ]\n})\n\nrouter.afterEach(route => {\n  Indicator.close();\n})\n\nwindow.router = router;\n\n\nnew Vue({\n  el: '#app',\n  router\n\n})\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}